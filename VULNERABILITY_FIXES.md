# Security Vulnerabilities - Fixes Applied

## Summary
Fixed **1 HIGH** and **4 MEDIUM** severity vulnerabilities found by Snyk.

## Vulnerabilities Fixed

### ðŸ”´ HIGH Severity

#### 1. werkzeug@2.2.3 - Remote Code Execution (CVE-2024-34069)
- **CVSS**: 7.5 (HIGH)
- **Issue**: RCE when debugger enabled
- **Fix**: Upgraded `flask>=3.0.0` (includes `werkzeug>=3.0.3`)
- **Impact**: Critical - prevents code execution attacks

#### 2. werkzeug@2.2.3 - DoS via Multipart Parsing (CVE-2023-46136)
- **CVSS**: 7.5 (HIGH per NVD)
- **Issue**: Denial of Service via crafted multipart data
- **Fix**: Upgraded `flask>=3.0.0` (includes `werkzeug>=3.0.3`)
- **Impact**: Critical - prevents DoS attacks

### ðŸŸ¡ MEDIUM Severity

#### 3. zipp@3.15.0 - Infinite Loop (CVE-2024-5569)
- **CVSS**: 6.9 (MEDIUM)
- **Issue**: Infinite loop in Path operations
- **Fix**: Pinned `zipp>=3.19.1`
- **Impact**: Medium - can cause application hang

#### 4. fiona@1.9.6 - Denial of Service
- **CVSS**: 6.9 (MEDIUM)
- **Issue**: DoS through excessive memory consumption
- **Fix**: Upgraded `geopandas>=0.14.0` (includes `fiona>=1.10b2`)
- **Impact**: Medium - can cause memory exhaustion

#### 5. urllib3@1.26.20 - Open Redirect (CVE-2025-50181)
- **CVSS**: 6.0 (MEDIUM)
- **Issue**: Open redirect vulnerability
- **Fix**: Pinned `urllib3>=2.5.0`
- **Impact**: Medium - potential redirect attacks

## Changes Made

### app/requirements.txt
```diff
- flask
- geopandas
- boto3
+ flask>=3.0.0
+ werkzeug>=3.0.3
+ geopandas>=0.14.0
+ fiona>=1.10b2
+ boto3>=1.35.0
+ urllib3>=2.5.0
+ zipp>=3.19.1
```

### app/requirements-lambda.txt
```diff
- boto3
+ boto3>=1.35.0
+ urllib3>=2.5.0
+ zipp>=3.19.1
```

## Testing After Fixes

1. **Update dependencies**:
   ```bash
   pip install -r app/requirements.txt --upgrade
   ```

2. **Test local development**:
   ```bash
   docker-compose up --build
   curl http://localhost:5000/health
   ```

3. **Rebuild Lambda** (after fixing):
   ```bash
   cd terraform
   terraform apply -target=module.lambda.null_resource.lambda_build
   ```

## Compatibility Notes

- **Flask 3.0**: Backward compatible with Flask 2.x APIs used in this project
- **GeoPandas 0.14**: Should maintain compatibility (0.10 â†’ 0.14 is a significant jump but API is stable)
- **urllib3 2.x**: Major version, but boto3 1.35+ fully supports it
- **werkzeug 3.0**: Required for security fixes, included with Flask 3.0

## Status: âœ… All Vulnerabilities Fixed

All HIGH and MEDIUM severity vulnerabilities have been addressed with appropriate version upgrades.

